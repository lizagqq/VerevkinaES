# –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞ ‚Ññ5: –î–≤—É–º–µ—Ä–Ω–∞—è –¥–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è –º–∞—Ç—Ä–∏—Ü—ã

## üéØ –¶–µ–ª—å —Ä–∞–±–æ—Ç—ã

–û—Å–≤–æ–∏—Ç—å —Ä–∞–±–æ—Ç—É —Å –≥—Ä—É–ø–ø–∞–º–∏ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –∏ –∫–æ–º–º—É–Ω–∏–∫–∞—Ç–æ—Ä–∞–º–∏ MPI. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —É–º–Ω–æ–∂–µ–Ω–∏–µ –º–∞—Ç—Ä–∏—Ü—ã –Ω–∞ –≤–µ–∫—Ç–æ—Ä —Å –¥–≤—É–º–µ—Ä–Ω–æ–π –¥–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏–µ–π. –°—Ä–∞–≤–Ω–∏—Ç—å —Å –æ–¥–Ω–æ–º–µ—Ä–Ω—ã–º–∏ –ø–æ–¥—Ö–æ–¥–∞–º–∏ –∏–∑ Lab1.

**–û—Ü–µ–Ω–∫–∞:** –•–æ—Ä–æ—à–æ (–≤—ã–ø–æ–ª–Ω–µ–Ω—ã –ß–∞—Å—Ç—å 1 + –±–∞–∑–æ–≤–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ)

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
lab5/
‚îú‚îÄ‚îÄ matvec_2d.py          # –û—Å–Ω–æ–≤–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞ (2D –¥–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è)
‚îú‚îÄ‚îÄ generate_data.py      # –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ compare_results.py    # –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑
‚îú‚îÄ‚îÄ comparison_results.json  # –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤
‚îú‚îÄ‚îÄ –û–¢–ß–ï–¢.md             # –û—Ç—á—ë—Ç
‚îú‚îÄ‚îÄ –û–¢–ß–ï–¢.pdf            # –û—Ç—á—ë—Ç (PDF)
‚îî‚îÄ‚îÄ README.md            # –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
```bash
python generate_data.py
```

–°–æ–∑–¥–∞—ë—Ç 3 –Ω–∞–±–æ—Ä–∞: small (100√ó100), medium (500√ó500), large (1000√ó1000)

### 2. –ó–∞–ø—É—Å–∫ –ø—Ä–æ–≥—Ä–∞–º–º—ã

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ:** –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø–æ–ª–Ω—ã–º –∫–≤–∞–¥—Ä–∞—Ç–æ–º!

```bash
# –î–ª—è 4 –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (—Å–µ—Ç–∫–∞ 2√ó2)
mpiexec -n 4 python matvec_2d.py

# –î–ª—è 9 –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (—Å–µ—Ç–∫–∞ 3√ó3)
mpiexec -n 9 python matvec_2d.py

# –î–ª—è 16 –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (—Å–µ—Ç–∫–∞ 4√ó4)
mpiexec -n 16 python matvec_2d.py
```

### 3. –ê–Ω–∞–ª–∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
```bash
python compare_results.py
```

## üìä –ö–ª—é—á–µ–≤—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –°—Ä–∞–≤–Ω–µ–Ω–∏–µ 1D vs 2D (1000√ó1000, 16 –ø—Ä–æ—Ü–µ—Å—Å–æ–≤)

| –ú–µ—Ç—Ä–∏–∫–∞ | 1D (—Å—Ç—Ä–æ–∫–∏) | 2D (–±–ª–æ–∫–∏) | –£–ª—É—á—à–µ–Ω–∏–µ |
|---------|-------------|------------|-----------|
| –í—Ä–µ–º—è | 2.145 —Å | 1.634 —Å | **23.8%** |
| –£—Å–∫–æ—Ä–µ–Ω–∏–µ | 10.92x | 14.33x | +31.2% |
| –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å | 68.3% | **89.6%** | +21.3% |

**–í—ã–≤–æ–¥:** 2D –¥–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è –Ω–∞ **24% –±—ã—Å—Ç—Ä–µ–µ** –∏ –Ω–∞ **21% —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–µ–µ**!

### –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å vs –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤

| –ü—Ä–æ—Ü–µ—Å—Å—ã | 1D | 2D | –†–∞–∑–Ω–∏—Ü–∞ |
|----------|----|----|---------|
| 4 | 81.0% | **92.3%** | +11.3% |
| 9 | 70.8% | **87.1%** | +16.3% |
| 16 | 68.3% | **89.6%** | +21.3% |

**–í—ã–≤–æ–¥:** –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ 2D **—Ä–∞—Å—Ç—ë—Ç —Å —É–≤–µ–ª–∏—á–µ–Ω–∏–µ–º P**!

## üî¨ –¢–µ–æ—Ä–∏—è

### –î–≤—É–º–µ—Ä–Ω–∞—è –¥–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è

**–ò–¥–µ—è:** –ú–∞—Ç—Ä–∏—Ü–∞ —Ä–∞–∑–±–∏–≤–∞–µ—Ç—Å—è –Ω–∞ –±–ª–æ–∫–∏ –ø–æ –¥–≤—É–º –∏–∑–º–µ—Ä–µ–Ω–∏—è–º

```
–°–µ—Ç–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ 4√ó4:
 0  1  2  3
 4  5  6  7
 8  9 10 11
12 13 14 15

–ö–∞–∂–¥—ã–π –ø—Ä–æ—Ü–µ—Å—Å –ø–æ–ª—É—á–∞–µ—Ç –±–ª–æ–∫ (M/4) √ó (N/4)
```

### –ö–æ–º–º—É–Ω–∏–∫–∞—Ç–æ—Ä—ã

```python
# –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º—É–Ω–∏–∫–∞—Ç–æ—Ä–æ–≤ –¥–ª—è —Å—Ç—Ä–æ–∫ –∏ —Å—Ç–æ–ª–±—Ü–æ–≤
comm_col = comm.Split(color=rank % num_col, key=rank)
comm_row = comm.Split(color=rank // num_col, key=rank)
```

### –ê–ª–≥–æ—Ä–∏—Ç–º

1. –†–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç—å –±–ª–æ–∫–∏ –º–∞—Ç—Ä–∏—Ü—ã A
2. –†–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç—å —á–∞—Å—Ç–∏ –≤–µ–∫—Ç–æ—Ä–∞ x
3. –õ–æ–∫–∞–ª—å–Ω–æ: `b_temp = A_part @ x_part`
4. Reduce –≤–¥–æ–ª—å —Å—Ç—Ä–æ–∫: `comm_row.Reduce(...)`
5. Gather —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞: `comm_col.Gatherv(...)`

## üí° –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ 2D

**1. –ú–µ–Ω—å—à–µ –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–π –≤ –ø–æ–¥–≥—Ä—É–ø–ø–∞—Ö:**
- –û–ø–µ—Ä–∞—Ü–∏–∏ –≤–Ω—É—Ç—Ä–∏ comm_row –∏ comm_col –±—ã—Å—Ç—Ä–µ–µ
- –ú–µ–Ω—å—à–µ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ —É—á–∞—Å—Ç–≤—É—é—Ç –≤ –∫–∞–∂–¥–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏

**2. –õ—É—á—à–∞—è –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å:**
- –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å 89.6% –Ω–∞ 16 –ø—Ä–æ—Ü–µ—Å—Å–∞—Ö
- vs 68.3% —É 1D

**3. –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏:**
- –ü–æ —Å—Ç—Ä–æ–∫–∞–º –∏ —Å—Ç–æ–ª–±—Ü–∞–º –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ

## ‚ö†Ô∏è –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

**1. –¢—Ä–µ–±—É–µ—Ç—Å—è –∫–≤–∞–¥—Ä–∞—Ç–Ω–æ–µ P:**
- 1, 4, 9, 16, 25, 36, 49, 64, ...

**2. –ù–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –¥–ª—è –≤—ã—Ç—è–Ω—É—Ç—ã—Ö –º–∞—Ç—Ä–∏—Ü:**
- –ï—Å–ª–∏ M >> N –∏–ª–∏ N >> M, –ª—É—á—à–µ 1D

**3. –°–ª–æ–∂–Ω–µ–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
- –ë–æ–ª—å—à–µ –∫–æ–º–º—É–Ω–∏–∫–∞—Ç–æ—Ä–æ–≤
- –°–ª–æ–∂–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

## üìà –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å?

| –£—Å–ª–æ–≤–∏–µ | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è |
|---------|--------------|
| M ‚âà N (–∫–≤–∞–¥—Ä–∞—Ç–Ω—ã–µ) | **2D** ‚≠ê |
| M >> N –∏–ª–∏ N >> M | 1D |
| P ‚â• 16 | **2D** (–ª—É—á—à–µ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è) |
| P ‚â§ 4 | 1D –∏–ª–∏ 2D (—Ä–∞–≤–Ω—ã) |
| P = k¬≤ | **2D** (–ø—Ä–æ—â–µ) |
| P ‚â† k¬≤ | 1D |

## üõ† –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- Python 3.8+
- mpi4py 3.1+
- NumPy 1.21+

## üìñ –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ –æ—Ç—á—ë—Ç–∞

1. **–¢–µ–æ—Ä–∏—è** (2D –¥–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è, –∫–æ–º–º—É–Ω–∏–∫–∞—Ç–æ—Ä—ã)
2. **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è** (—Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º—É–Ω–∏–∫–∞—Ç–æ—Ä–æ–≤, —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö)
3. **–≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã** (3 –Ω–∞–±–æ—Ä–∞, 3 –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤)
4. **–°—Ä–∞–≤–Ω–µ–Ω–∏–µ** (3 —Ç–∞–±–ª–∏—Ü—ã: –≤—Ä–µ–º—è, —É—Å–∫–æ—Ä–µ–Ω–∏–µ, —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å)
5. **–ê–Ω–∞–ª–∏–∑ –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–π**
6. **–í—ã–≤–æ–¥—ã –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏**
7. **–û—Ç–≤–µ—Ç—ã –Ω–∞ 10 –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤**

## ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ –æ—Ü–µ–Ω–∫–∏

- ‚úÖ **–£–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–æ:** –ë–∞–∑–æ–≤–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è 2D (–ß–∞—Å—Ç—å 1)
- ‚úÖ **–•–æ—Ä–æ—à–æ:** –ß–∞—Å—Ç—å 1 + –±–∞–∑–æ–≤–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ (–ß–∞—Å—Ç—å 3.1-3.2)
- ‚ùå **–û—Ç–ª–∏—á–Ω–æ:** + –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ CG (–ß–∞—Å—Ç—å 2) + –¥–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ (–ß–∞—Å—Ç—å 3.3)

**–°—Ç–∞—Ç—É—Å:** –•–æ—Ä–æ—à–æ (–ß–∞—Å—Ç—å 1 + 3.1-3.2 –≤—ã–ø–æ–ª–Ω–µ–Ω—ã)

## üéì –í—ã–≤–æ–¥—ã

1. **2D –¥–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–µ–µ –Ω–∞ 9-24%**
2. **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –¥–æ 92.3%** (vs 81% —É 1D)
3. **–õ—É—á—à–µ –¥–ª—è –∫–≤–∞–¥—Ä–∞—Ç–Ω—ã—Ö –º–∞—Ç—Ä–∏—Ü** (M ‚âà N)
4. **–¢—Ä–µ–±—É–µ—Ç –∫–≤–∞–¥—Ä–∞—Ç–Ω–æ–µ P**
5. **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ —Ä–∞—Å—Ç—ë—Ç —Å P**

---

**–†–∞–±–æ—Ç–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –Ω–∞ –æ—Ü–µ–Ω–∫—É "–•–û–†–û–®–û"**
